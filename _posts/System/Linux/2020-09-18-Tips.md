---
title: Tips
date: 2020-09-18 14:00:00 HH:MM:SS +0200
categories: [System, Linux]
tags: [system, linux, shell, tips, symlink, pwd, printenv, env, set, unset, password, sudo, sudoers, user, group, find]
---

### Redirections

File descriptor 1 is the standard output (`stdout`).
File descriptor 2 is the standard error (`stderr`).

Here is one way to remember this construct (although it is not entirely accurate): at first, `2>1` may look like a good way to redirect `stderr` to `stdout`. However, it will actually be interpreted as "redirect `stderr` to a file named `1`". `&` indicates that what follows and precedes is a file descriptor and not a filename. So the construct becomes: `2>&1`.

Consider `>&` as redirect merger operator.

https://askubuntu.com/a/350216


### Find something

```shell
find <base> -name <name>
```

Example:

```shell
find / -name *.py
```

```shell
find / -name *.py 2>/dev/null
```

### Create a symlink

```shell
ln -s ~/foo/bar/baz ~/mySymLink
```

### Print Working Directory a.k.a. pwd

When you've followed a symlink, pwd shows by default the logical path, ie:

```shell
cd ~/mySymLink
pwd
```

```text
~/mySymLink
```

If you need the real physical path, use the -P argument:

```shell
pwd -P
```

```text
~/foo/bar/baz
```

### Environment variables

List them:

```shell
printenv 
```

Add one:

```shell
export MY_VAR 
```

Display one:

```shell
echo $MY_VAR 
```

Remove one:

```shell
unset MY_VAR 
```

### Read a password from the console and avoid to have it in the bash_history

Example setting a proxy in an environment variable:

```shell
read -s pass
export my_var="http://user:$pass@my_proxy.com:1234"
```

### Validate a sudoers file

For a user `user` that has a specific sudoers `/etc/sudoers.d/user` file:

```shell
visudo -cf /etc/sudoers.d/user
```

Error output example:

```shell
>>> /etc/sudoers.d/user: syntax error near line 2 <<<
parse error in /etc/sudoers.d/user near line 2
```

OK output example:

```shell
/etc/sudoers.d/user: parsed OK
```

### Groups

#### Create a group

Create a group with a given GID (thanks to `-g` argument) and a given name:

```shell
groupadd -g <gid> <groupName>
```

Example:

```shell
groupadd -g 1000 myGroup
```

#### List existing groups

```shell
cat /etc/group
```

Example output:

```text
input:x:105:
kvm:x:106:
render:x:107:
crontab:x:108:
netdev:x:109:
myGroup:x:1000:
ssh:x:110:
```

### Users

#### Create a user

Create a user with:

* `-d`: its home directory
* `-u`: its UID
* `-g`: its GID

Followed by its name:

```shell
useradd -d <homeDirectory> -u <uid> -g <gid> <userName>
```

Example:

```shell
useradd -d /home/myUser -u 1000 -g 1000 myUser
```

#### List existing users

```shell
cat /etc/passwd
```

Example output:

```text
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
```
